id: serverboards.remotesql
name: Remote SQL
description: |
  Access and perform basic queries at a remote SQL server accesible via a SSH
  tunel.
author: David Moreno <dmoreno@serverboards.io>
version: 0.0.1

components:
  - id: service
    type: service
    name: SQL Server
    icon: database
    traits: sql
    description: |
      Remote database
    fields:
      - name: via
        type: service
        traits: ssh
        label: At service
        placeholder: Connect directly
        card: true
      - name: type
        label: Database type
        type: select
        options:
          - label: PostgreSQL
            name: postgres
          - label: SQLite
            name: sqlite
        card: true
      - name: hostname
        label: Hostname
        placeholder: Leave empty to connect to the remote service's `localhost`
      - name: port
        type: text
        label: Database port
        placeholder: Leave empty for defaults
      - name: username
        label: User
        description: User to access the database
        placeholder: Leave empty if no need for authentication
      - name: password_pw
        label: Password
        type: password
        description: User to access the database
        placeholder: Leave empty if no need for authentication

  - id: console
    type: screen
    name: SQL Console
    description: Perform basic SQL queries directly to a remote database
    traits: sql
    icon: terminal

  - id: daemon
    type: cmd
    timeout: 15m
    command: ./serverboards-sql.py
    name: Remote run SQL commands
    perms: plugin service.info
